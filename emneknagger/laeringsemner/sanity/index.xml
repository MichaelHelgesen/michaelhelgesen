<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sanity on Michael Helgesen</title>
    <link>https://www.michaelhelgesen.no/emneknagger/laeringsemner/sanity/</link>
    <description>Recent content in Sanity on Michael Helgesen</description>
    <generator>Hugo</generator>
    <language>nb</language>
    <lastBuildDate>Mon, 05 Jan 2026 13:13:15 +0100</lastBuildDate>
    <atom:link href="https://www.michaelhelgesen.no/emneknagger/laeringsemner/sanity/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>2025-08-13</title>
      <link>https://www.michaelhelgesen.no/laeringslogg/2025-08-13/</link>
      <pubDate>Wed, 13 Aug 2025 00:00:00 +0000</pubDate>
      <guid>https://www.michaelhelgesen.no/laeringslogg/2025-08-13/</guid>
      <description>&lt;h2 id=&#34;nextjs&#34;&gt;nextjs&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Lært om oppbygning av applikasjon i Next.js:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/my-next-app&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├── public/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├── src/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   ├── app/              &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── page.tsx     &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── layout.tsx  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── kontakt/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   │   └── page.ts&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── [slug]/   &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   │   └── page.tsx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   └── globale.cs&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   ├── components/  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── Header.tsx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── Footer.tsx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   └── PortableText.tsx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   ├── lib/        &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   ├── sanity.t&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   └── utils.t&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   ├── types/    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   └── page.t&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   ├── styles/  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │   └── globals.css&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   │&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│   └── hooks/  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│       └── useWindowSize.ts&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;│&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├── .env.local &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├── next.config.j&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;├── tsconfig.jso&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└── package.json&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;public&lt;/strong&gt;: Statisk innhold som bilder, favicon, PDF-er og så videre. Kopieres til rot ved bygging.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;src&lt;/strong&gt;: Organisatorisk mappe. Anbefales for orden.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;app&lt;/strong&gt;: Next.js-ruter (App router).&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;page.tsx&lt;/strong&gt;: Forsiden.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;layout.tsx&lt;/strong&gt;: Grunnleggende layout, som &lt;code&gt;&amp;lt;htm&amp;gt;, &amp;lt;head&amp;gt;, &amp;lt;body&amp;gt;&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;kontakt&lt;/strong&gt;: Eksempel på statisk underside.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;page.tsx&lt;/strong&gt;: Innhold på statisk side &lt;code&gt;/kontakt&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;[slug]&lt;/strong&gt;: Dynamiske sider, for eksempel innhold fra CMS.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;page.tsx&lt;/strong&gt;: Innhold på dynamiske sider.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;global.css&lt;/strong&gt;: Felles CSS/typografi. Kan benyttes for små prosjekter. For større applikasjoner, hvor CSS bør deles opp, brukes heller &lt;code&gt;/styles/globals.css&lt;/code&gt; og flere.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;components&lt;/strong&gt;: Gjenbrukbare React-komponenter.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Header.tsx&lt;/strong&gt;: Eksempel på React-komponent.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;lib&lt;/strong&gt;: Funksjoner, API-kall, konfigurasjoner.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;sanity.ts&lt;/strong&gt;: Eksempel.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;types&lt;/strong&gt;: Typescript-typer.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;page.ts&lt;/strong&gt;: Eksempel.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;styles&lt;/strong&gt;: CSS-moduler eller globale stilark. Brukes gjerne for større prosjekter.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;globals.css&lt;/strong&gt;: Eksempel.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;hooks&lt;/strong&gt;: Egne React-hooks.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;useWindowSize.ts&lt;/strong&gt;: Eksempel.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;.env.local&lt;/strong&gt;: Miljøvariabler.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;next.config.js&lt;/strong&gt;: Konfigurasjon av Next.js.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;tsconfig.json&lt;/strong&gt;: Typescript-innstillinger.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;package.json&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;med mer&lt;/strong&gt;&lt;br&gt;&#xA;---&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;.env.local&lt;/code&gt; i Next.js:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Filen må ligge på rot.&lt;/li&gt;&#xA;&lt;li&gt;Variabler som skal være tilgjengelig i Frontend på inkludere prefikset &lt;code&gt;NEXT_PUBLIC_&lt;/code&gt;. Eksempel &lt;code&gt;NEXT_PUBLIC_API_URL&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Variabler for backend trenger ikke spesielle prefiks.&lt;/li&gt;&#xA;&lt;li&gt;Brukes på følgende måte i koden: &lt;code&gt;process.env.NEXT_PUBLIC_API_URL&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;sanity&#34;&gt;sanity&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;.env.local&lt;/code&gt; i Sanity:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Variabler som har prefikset &lt;code&gt;SANITY_STUDIO_&lt;/code&gt; blir automatisk inkludert i Sanity CLI-verktøy, utviklingsserveren og «bundler».&lt;/li&gt;&#xA;&lt;li&gt;Brukes på følgende måte: &lt;code&gt;process.env.SANITY_STUDIO_&lt;/code&gt;&amp;hellip;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>2025-01-28</title>
      <link>https://www.michaelhelgesen.no/laeringslogg/2025-01-28/</link>
      <pubDate>Tue, 28 Jan 2025 00:00:00 +0000</pubDate>
      <guid>https://www.michaelhelgesen.no/laeringslogg/2025-01-28/</guid>
      <description>&lt;h2 id=&#34;sanity&#34;&gt;sanity&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Fullførte kurset &lt;a href=&#34;https://www.sanity.io/learn/course/handling-schema-changes-confidently/introduction-to-schema-change-management&#34; target=&#34;_blank&#34; class=&#34;external_link&#34;&gt;&#xA;    &#xA;            &#xA;                Handling&#xA;                schema&#xA;                changes&#xA;                &#xA;                    &lt;span&gt;confidently&#xA;                        &lt;svg width=&#34;14px&#34; height=&#34;14px&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;&#xA;                        &lt;g id=&#34;Interface / External_Link&#34;&gt;&#xA;                        &lt;path id=&#34;Vector&#34; d=&#34;M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11&#34; stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;/&gt;&#xD;&#xA;                                            &lt;/g&gt;&#xD;&#xA;                        &lt;/svg&gt;&lt;/span&gt;&lt;/a&gt; og lærte om endringer av skjema, migrering av data, eksport og import av data.&lt;/li&gt;&#xA;&lt;li&gt;Vi kan laste opp hele datasett &lt;code&gt;npx sanity@latest dataset import ~/path/to/production.tar.gz production&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Kan validere med &lt;code&gt;npx sanity@latest documents validate&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;For å endre navn på et felt kan man gå frem på følgende måte:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Legge til nytt felt med nytt navn.&lt;/li&gt;&#xA;&lt;li&gt;Deaktivere gammelt felt &lt;code&gt;deprecated: { reason: &amp;quot;Use the event Format field insteda.&amp;quot;}&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Oppdatere spørringen for å hente fra den nye feltet, med mulighet til å falle tilbake på gammelt felt.&lt;/li&gt;&#xA;&lt;li&gt;Oppdatere GROQ-spørring i front-end filer til å støtte begge felt ved bruk av «coalesce»: &lt;code&gt; &amp;quot;eventType&amp;quot;: coalesce(format, eventType)&lt;/code&gt;.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Koden over betyr at man skal bruke &lt;code&gt;format&lt;/code&gt;, om den har verdi, og knytte den til &lt;code&gt;eventType&lt;/code&gt;. Om &lt;code&gt;format&lt;/code&gt; er tom, skal &lt;code&gt;eventType&lt;/code&gt; brukes.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Lag et migrasjonsscript for å forberede flytting av data fra gammelt felt til nytt: &lt;code&gt;npx sanity@latest migration create &amp;quot;Replace event type with event format&amp;quot;&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;I scriptet sett &lt;code&gt;to&lt;/code&gt; og &lt;code&gt;from&lt;/code&gt; til korrekte feltnavn.&lt;/li&gt;&#xA;&lt;li&gt;Kjør &lt;code&gt;npx sanity@latest migration list&lt;/code&gt;for å vise migrasjonslister.&lt;/li&gt;&#xA;&lt;li&gt;Kjør en «dry run» for å se hvordan en migrasjon vil påvirke studio: &lt;code&gt;npx sanity@latest migration run replace-event-type-with-event-format&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Eksporter gammel database: &lt;code&gt;npx sanity@latest dataset export production&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Ønsker du å tilbakestille til et stadie før migreringen, bruk: &lt;code&gt;npx sanity@latest dataset import production.tar.gz production --replace&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Kjør migrering med &lt;code&gt;npx sanity@latest migration run replace-event-type-with-event-format --no-dry-run&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Kjør validate på nytt for å se etter 0 errors: &lt;code&gt;npx sanity@latest documents validate -y&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Fjern støtten for gammelt felt.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Slett fra GROQ i front-end: &lt;code&gt;&amp;quot;eventType&amp;quot;: coalesce(format, eventType)&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Endre i front-end. I dette tilfellet fra &lt;code&gt;eventType&lt;/code&gt; til &lt;code&gt;format&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Man kan også bruke en tilnærming Sanity kaller «indempotent».&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Betyr at man skal kunne kjøre migrasjonen flere ganger med samme resultat.&lt;/li&gt;&#xA;&lt;li&gt;Hindre at migrering skaper uønskede endringer.&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Kan bruke filter i scriptet for å velge kun de dokumentene som skal migreres.&lt;/li&gt;&#xA;&lt;li&gt;Ikke alltid filter kan brukes, da kan vi legge til en nøkkel når vi migrerer og hoppe over dokumenter som allerede har nøkler.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Filter:&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; {&lt;span style=&#34;color:#a6e22e&#34;&gt;defineMigration&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setIfMissing&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unset&lt;/span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sanity/migrate&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;eventType&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;format&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;defineMigration&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Replace event type with event format&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// documentTypes: [&amp;#39;event&amp;#39;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;_type == &amp;#34;event&amp;#34; &amp;amp;&amp;amp; defined(eventType) &amp;amp;&amp;amp; !defined(format)&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;migrate&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    document(&lt;span style=&#34;color:#a6e22e&#34;&gt;doc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; [&lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setIfMissing&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;doc&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;])), &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unset&lt;/span&gt;())]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;idempotenceKey (nøkkel):&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; {&lt;span style=&#34;color:#a6e22e&#34;&gt;defineMigration&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setIfMissing&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unset&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sanity/migrate&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// should be unique for the migration but never change&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;idempotenceKey&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;xyz&amp;#39;&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;eventType&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;format&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;defineMigration&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Replace event type with event format&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// documentTypes: [&amp;#39;event&amp;#39;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;_type == &amp;#34;event&amp;#34; &amp;amp;&amp;amp; defined(eventType) &amp;amp;&amp;amp; !defined(format)&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;migrate&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    document(&lt;span style=&#34;color:#a6e22e&#34;&gt;doc&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ((&lt;span style=&#34;color:#a6e22e&#34;&gt;doc&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;_migrations&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;[] &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; []).&lt;span style=&#34;color:#a6e22e&#34;&gt;includes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;idempotenceKey&lt;/span&gt;)) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// Document already migrated, so we can skip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setIfMissing&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;doc&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;])),&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;unset&lt;/span&gt;()),&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;//… add idempotence key&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;_migrations&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setIfMissing&lt;/span&gt;([])),&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;at&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;_migrations&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;idempotenceKey&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;after&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)),&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>2025-01-21</title>
      <link>https://www.michaelhelgesen.no/laeringslogg/2025-01-21/</link>
      <pubDate>Tue, 21 Jan 2025 00:00:00 +0000</pubDate>
      <guid>https://www.michaelhelgesen.no/laeringslogg/2025-01-21/</guid>
      <description>&lt;h2 id=&#34;sanity&#34;&gt;sanity&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Gjennomførte kurs &lt;a href=&#34;https://www.sanity.io/learn/course/day-one-with-sanity-studio/prerequisites&#34; target=&#34;_blank&#34; class=&#34;external_link&#34;&gt;&#xA;    &#xA;            &#xA;                Day&#xA;                One&#xA;                with&#xA;                Sanity&#xA;                &#xA;                    &lt;span&gt;Studio&#xA;                        &lt;svg width=&#34;14px&#34; height=&#34;14px&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;&#xA;                        &lt;g id=&#34;Interface / External_Link&#34;&gt;&#xA;                        &lt;path id=&#34;Vector&#34; d=&#34;M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11&#34; stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;/&gt;&#xD;&#xA;                                            &lt;/g&gt;&#xD;&#xA;                        &lt;/svg&gt;&lt;/span&gt;&lt;/a&gt; og &lt;a href=&#34;https://www.sanity.io/learn/course/studio-excellence/excellent-editorial-experiences&#34; target=&#34;_blank&#34; class=&#34;external_link&#34;&gt;&#xA;    &#xA;            &#xA;                Excellent&#xA;                editorial&#xA;                &#xA;                    &lt;span&gt;experiences&#xA;                        &lt;svg width=&#34;14px&#34; height=&#34;14px&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;&#xA;                        &lt;g id=&#34;Interface / External_Link&#34;&gt;&#xA;                        &lt;path id=&#34;Vector&#34; d=&#34;M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11&#34; stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;/&gt;&#xD;&#xA;                                            &lt;/g&gt;&#xD;&#xA;                        &lt;/svg&gt;&lt;/span&gt;&lt;/a&gt; om &lt;a href=&#34;http://www.sanity.io/&#34; target=&#34;_blank&#34; class=&#34;external_link&#34;&gt;&#xA;    &#xA;            &#xA;                Sanity&#xA;                &#xA;                    &lt;span&gt;Studio&#xA;                        &lt;svg width=&#34;14px&#34; height=&#34;14px&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;&#xA;                        &lt;g id=&#34;Interface / External_Link&#34;&gt;&#xA;                        &lt;path id=&#34;Vector&#34; d=&#34;M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11&#34; stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;/&gt;&#xD;&#xA;                                            &lt;/g&gt;&#xD;&#xA;                        &lt;/svg&gt;&lt;/span&gt;&lt;/a&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Lærte om nye måter å definere datatyper på med valideringer, begrensninger, hjelpetekster, betingelser med mer.&lt;/li&gt;&#xA;&lt;li&gt;Lærte om hvordan man kan tilpasse Sanity Studio ved å lage faner, egne lister og utseende.&lt;/li&gt;&#xA;&lt;li&gt;Jeg husker nå hvorfor jeg likte Sanity så godt for noen år siden.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;groq&#34;&gt;groq&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Lærte at man kan benytte GROQ i API-kall for å hente ut data: &lt;code&gt;https://no44j5ip.api.sanity.io/v1/data/query/production?query=*[_type==&amp;quot;sitat&amp;quot;]{sitat,kilde-&amp;gt;{kilde}}&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;Hvis vi spør etter referanse, så ser vi at bare selve referansen dukker opp, ikke det som refereres til. For å komme rundt det må man benytte en &amp;ldquo;pil&amp;rdquo; og deretter ny projeksjon for hva som ønskes. &lt;code&gt;headline-&amp;gt;{tittel}&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;I GROQ kalles &lt;code&gt;[]&lt;/code&gt; for filter, og &lt;code&gt;{}&lt;/code&gt; for &amp;ldquo;projection&amp;rdquo;. Førstnevnte filtrerer dokumentene, mens sistnevnte lar oss bestemme hvilke data vi ønsker å hente: &lt;code&gt;*[_type == &amp;quot;event&amp;quot;]{title,date}&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
